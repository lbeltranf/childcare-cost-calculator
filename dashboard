<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Public Policy Cost Dashboard</title>
<style>
    *{box-sizing:border-box;}
    body,html{
        height:100vh;
        margin:0;
        padding:0;
        font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
        display:flex;
        flex-direction:column;
        align-items:center;
    }
    h1{
        font-size:3vw;
        font-weight:800;
        margin:2vh 0 1vh;
    }
    .description-text{
        font-size:1.2vw;
        color:#444;
        max-width:80ch;
        text-align:center;
        margin-bottom:3vh;
    }
    #policies{
        width:100%;
        display:grid;
        grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
        gap:2vh 2vw;
        padding:0 2vw;
    }
    .policy-section{
        background:#f9f9f9;
        padding:2vh 2vw;
        border-radius:1vw;
        box-shadow:0 0.5vh 1.5vh rgba(0,0,0,0.05);
        text-align:center;
    }
    .policy-title{
        font-size:1.6vw;
        font-weight:600;
        margin-bottom:1vh;
    }
    .cost-text{
        font-size:1.4vw;
        background:#ffecec;
        border:0.2vw solid #ff4d4d;
        color:#a00000;
        padding:1vh 2vw;
        border-radius:1vw;
        font-weight:600;
        display:inline-block;
        margin-top:1vh;
    }
    .total-box{
        background:#fff3f3;
        padding:2vh 2vw;
        border-radius:1vw;
        border:0.2vw solid #ffcccc;
        text-align:center;
        box-shadow:0 0.5vh 1.5vh rgba(0,0,0,0.1);
        margin:3vh 0 2vh;
    }
    .total-text{
        font-size:2.5vw;
        color:#a00000;
        font-weight:bold;
        margin:0;
    }
    input[type=range]{
        width:100%;
        margin:1vh 0;
    }
    @media (max-width:768px){
        h1{font-size:6vw;}
        .policy-title{font-size:4vw;}
        .cost-text{font-size:4vw;}
        .total-text{font-size:6vw;}
        .description-text{font-size:3.5vw;}
    }
</style>
</head>
<body>
    <h1>Public Policy Cost Dashboard</h1>
    <p class="description-text">Use the interactive sliders below to model projected costs associated with various public policy options. Each change dynamically updates the estimated government expenditure.</p>
    <div id="policies"></div>
    <div class="total-box"><p id="total-text" class="total-text">Total Estimated Cost: $0</p></div>

<script>
const policies = [
  {
    name: "Increase Average Student Test Scores (NAEP scale)",
    domain_min: 250,
    domain_max: 300,
    step: 1,
    func: "1500000 * ((x - 250) ** 2)"
  },
  {
    name: "Reduce Adult Recidivism Rate (%)",
    domain_min: 10,
    domain_max: 40,
    step: 1,
    func: "3000000 * ((40 - x) ** 1.5)"
  },
  {
    name: "Expand Broadband Access (% of rural population)",
    domain_min: 50,
    domain_max: 100,
    step: 5,
    func: "5000000 * Math.log1p(x - 50)"
  },
  {
    name: "Increase Vaccination Rate (% population)",
    domain_min: 70,
    domain_max: 95,
    step: 1,
    func: "2000000 * ((x - 70) ** 1.8)"
  },
  {
    name: "Improve Air Quality Index (AQI reduction)",
    domain_min: 0,
    domain_max: 30,
    step: 1,
    func: "1000000 * (x ** 2)"
  }
];

function evaluate(fn, x){
    return Function('x','Math','return '+fn)(x,Math);
}

function roundCost(val){
    return Math.round(val/100000)*100000;
}

function format(val){
    return val.toLocaleString('en-US',{style:'currency',currency:'USD',maximumFractionDigits:0});
}

function buildUI(){
    const container=document.getElementById('policies');
    policies.forEach((policy,idx)=>{
        const section=document.createElement('div');
        section.className='policy-section';
        const title=document.createElement('div');
        title.className='policy-title';
        title.textContent=policy.name;
        const slider=document.createElement('input');
        slider.type='range';
        slider.min=policy.domain_min;
        slider.max=policy.domain_max;
        slider.step=policy.step;
        slider.value=policy.domain_min;
        slider.id='slider_'+idx;
        const costText=document.createElement('div');
        costText.className='cost-text';
        costText.id='cost_'+idx;
        costText.textContent='Estimated Cost: '+format(roundCost(evaluate(policy.func, slider.value)));
        section.appendChild(title);
        section.appendChild(slider);
        section.appendChild(costText);
        container.appendChild(section);

        slider.addEventListener('input',()=>{
            costText.textContent='Estimated Cost: '+format(roundCost(evaluate(policy.func, slider.value)));
            updateTotal();
        });
    });
    updateTotal();
}

function updateTotal(){
    let total=0;
    policies.forEach((policy,idx)=>{
        const val=document.getElementById('slider_'+idx).value;
        total+=roundCost(evaluate(policy.func, val));
    });
    document.getElementById('total-text').textContent='Total Estimated Cost: '+format(total);
}

document.addEventListener('DOMContentLoaded',buildUI);
</script>
</body>
</html>
